<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Extractor and Solver - Tutor App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .header p {
            font-size: 1em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            background: transparent;
            border: none;
            font-size: 1em;
            font-weight: 600;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: #007bff;
            border-bottom-color: #007bff;
            background: white;
        }

        .tab-content {
            padding: 40px;
        }

        .section-title {
            font-size: 1.4em;
            color: #2d3748;
            margin-bottom: 8px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-description {
            color: #6c757d;
            margin-bottom: 30px;
            font-size: 0.95em;
        }

        .form-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid #e9ecef;
        }

        .form-section-title {
            font-size: 1em;
            color: #495057;
            margin-bottom: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-grid-two {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        select, input {
            padding: 12px 15px;
            border: 1px solid #ced4da;
            border-radius: 8px;
            font-size: 0.95em;
            background: white;
            transition: border-color 0.3s ease;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }

        .file-upload {
            border: 2px dashed #007bff;
            border-radius: 12px;
            padding: 60px 20px;
            text-align: center;
            background: #f8f9ff;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .file-upload:hover {
            background: #e6f3ff;
            border-color: #0056b3;
        }

        .file-upload.dragover {
            background: #d9edff;
            border-color: #0056b3;
            transform: scale(1.02);
        }

        .file-upload input {
            display: none;
        }

        .file-icon {
            font-size: 3em;
            color: #007bff;
            margin-bottom: 15px;
        }

        .upload-text {
            font-size: 1.2em;
            color: #495057;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .upload-hint {
            color: #6c757d;
            font-size: 0.9em;
        }

        .btn {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 123, 255, 0.3);
        }

        .btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .filename-preview {
            background: #e9ecef;
            padding: 12px 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #495057;
            margin-top: 15px;
            border: 1px solid #ced4da;
        }

        .file-info {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 12px 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.9em;
        }

        .success-message {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .form-grid-two {
                grid-template-columns: 1fr;
            }
            
            .container {
                margin: 10px;
            }
            
            .tab-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ¤– AI Extractor and Solver</h1>
            <p>Upload Cambridge IGCSE exam papers for AI-powered question extraction and solving</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('upload')">ðŸ“¤ Upload</button>
            <button class="tab" onclick="showTab('extract')">ðŸ”§ Extract</button>
            <button class="tab" onclick="showTab('solve')">ðŸ§  Solve</button>
        </div>

        <div class="tab-content" id="uploadTab">
            <div class="section-title">ðŸ“¤ Upload Exam PDF</div>
            <div class="section-description">Upload a Cambridge IGCSE exam paper PDF for question extraction</div>

            <!-- Success message for found questions -->
            <div class="success-message">
                âœ… Found 40 previously extracted questions. Ready for AI solving.
            </div>

            <div class="form-section">
                <div class="form-section-title">ðŸ“‹ Exam Information</div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="examType">Exam Type:</label>
                        <select id="examType">
                            <option value="Cambridge">Cambridge</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="subject">Subject:</label>
                        <select id="subject">
                            <option value="">Select Subject</option>
                            <option value="physics" selected>Physics</option>
                            <option value="chemistry">Chemistry</option>
                            <option value="biology">Biology</option>
                            <option value="mathematics">Mathematics</option>
                            <option value="economics">Economics</option>
                            <option value="accounting">Accounting</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="year">Year:</label>
                        <select id="year">
                            <option value="">Select Year</option>
                            <option value="2025" selected>2025</option>
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                            <option value="2022">2022</option>
                            <option value="2021">2021</option>
                            <option value="2020">2020</option>
                        </select>
                    </div>
                </div>

                <div class="form-grid-two">
                    <div class="form-group">
                        <label for="month">Month:</label>
                        <select id="month">
                            <option value="">Select Month</option>
                            <option value="Mar">Mar</option>
                            <option value="May">May</option>
                            <option value="Oct" selected>Oct</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="paperType">Paper Type:</label>
                        <select id="paperType">
                            <option value="Extended" selected>Extended</option>
                            <option value="Core">Core</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="paperCode">Paper Code:</label>
                    <select id="paperCode">
                        <option value="">Select Paper Code</option>
                        <option value="13" selected>13</option>
                        <option value="23">23</option>
                        <option value="33">33</option>
                    </select>
                </div>

                <div id="filenamePreview" class="filename-preview">
                    <strong>Solution filename:</strong> <span id="generatedFilename">physics_2025_Oct_13.json</span>
                </div>
            </div>

            <div class="form-section">
                <div class="form-section-title">ðŸ“Ž PDF File</div>
                
                <div class="file-upload" id="fileUpload">
                    <input type="file" id="pdfFile" accept=".pdf">
                    <div class="file-icon">ðŸ“„</div>
                    <div class="upload-text">Select a PDF file to upload</div>
                    <div class="upload-hint">Click here or drag and drop your exam paper</div>
                </div>
                
                <div id="fileInfo" class="file-info" style="display: none;">
                    <strong>Selected file:</strong> <span id="fileName"></span><br>
                    <strong>Size:</strong> <span id="fileSize"></span>
                </div>
            </div>

            <button class="btn" id="uploadBtn" onclick="uploadFile()">
                ðŸ“¤ Upload PDF
            </button>
        </div>

        <div class="tab-content" id="extractTab" style="display: none;">
            <div class="section-title">ðŸ”§ Extract Questions</div>
            <div class="section-description">AI-powered question extraction from uploaded PDF</div>
            
            <div class="success-message">
                âœ… 40 questions successfully extracted from physics_2023_Oct_0625_13.json
            </div>
            
            <p>Extraction interface will be shown here after PDF upload...</p>
        </div>

        <div class="tab-content" id="solveTab" style="display: none;">
            <div class="section-title">ðŸ§  Solve Questions</div>
            <div class="section-description">AI-powered question solving and answer generation</div>
            
            <div class="success-message">
                âœ… Ready to solve 40 extracted physics questions
            </div>
            
            <p>Solving interface will be shown here after question extraction...</p>
        </div>
    </div>

    <script>
        let currentFilename = '';

        // Tab switching
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').style.display = 'block';
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        // File upload handling
        const fileUpload = document.getElementById('fileUpload');
        const pdfFile = document.getElementById('pdfFile');

        fileUpload.addEventListener('click', () => pdfFile.click());
        fileUpload.addEventListener('dragover', handleDragOver);
        fileUpload.addEventListener('drop', handleDrop);
        fileUpload.addEventListener('dragleave', () => fileUpload.classList.remove('dragover'));

        pdfFile.addEventListener('change', handleFileSelect);

        // Form field listeners for filename generation
        ['subject', 'year', 'month', 'paperCode'].forEach(fieldId => {
            document.getElementById(fieldId).addEventListener('change', updateFilenamePreview);
        });

        function handleDragOver(e) {
            e.preventDefault();
            fileUpload.classList.add('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            fileUpload.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                pdfFile.files = files;
                handleFileSelect();
            }
        }

        function handleFileSelect() {
            const file = pdfFile.files[0];
            if (file) {
                document.getElementById('fileName').textContent = file.name;
                document.getElementById('fileSize').textContent = formatFileSize(file.size);
                document.getElementById('fileInfo').style.display = 'block';
                
                // Auto-populate fields from filename if possible
                autoPopulateFromFilename(file.name);
            }
        }

        function autoPopulateFromFilename(filename) {
            // Try to extract paper info from filename like "0625_w23_qp_13.pdf"
            const match = filename.match(/(\d{4})_([ws])(\d{2})_qp_(\d+)/i);
            if (match) {
                const [, code, session, year, paper] = match;
                
                // Set paper code
                document.getElementById('paperCode').value = paper;
                
                // Set year (20XX format)
                document.getElementById('year').value = `20${year}`;
                
                // Set month based on session
                if (session.toLowerCase() === 'w') {
                    document.getElementById('month').value = 'Oct';
                } else if (session.toLowerCase() === 's') {
                    document.getElementById('month').value = 'May';
                }
                
                updateFilenamePreview();
            }
        }

        function updateFilenamePreview() {
            const subject = document.getElementById('subject').value;
            const year = document.getElementById('year').value;
            const month = document.getElementById('month').value;
            const paperCode = document.getElementById('paperCode').value;
            
            if (subject && year && month && paperCode) {
                currentFilename = `${subject}_${year}_${month}_${paperCode}`;
                document.getElementById('generatedFilename').textContent = `${currentFilename}.json`;
            }
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function uploadFile() {
            if (!pdfFile.files[0]) {
                alert('Please select a PDF file first');
                return;
            }

            if (!currentFilename) {
                alert('Please fill in all exam information fields');
                return;
            }

            // Simulate upload process
            const uploadBtn = document.getElementById('uploadBtn');
            uploadBtn.disabled = true;
            uploadBtn.textContent = 'ðŸ“¤ Uploading...';
            
            setTimeout(() => {
                uploadBtn.disabled = false;
                uploadBtn.textContent = 'ðŸ“¤ Upload PDF';
                alert('PDF uploaded successfully!');
            }, 2000);
        }

        // Initialize with current values
        document.addEventListener('DOMContentLoaded', () => {
            updateFilenamePreview();
        });
    </script>
</body>
</html>